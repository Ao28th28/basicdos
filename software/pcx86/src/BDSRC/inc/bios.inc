;
; Standard PC BIOS vectors (the first few are really just 8086 vectors)
;
; Page numbers are from the first IBM 5150 Technical Reference Manual (1981)
;
INT_DIV		EQU	00h	; #DE (divide error)
INT_STEP	EQU	01h	; #DB (debug aka single-step)
INT_NMI		EQU	02h	; NMI
INT_BP		EQU	03h	; #BP (breakpoint)
INT_OV		EQU	04h	; #OF (overflow)
INT_PRTSC	EQU	05h	; PRINT_SCREEN (p. A-79)
INT_VIDEO	EQU	10h	; VIDEO_IO (p. A-43)
INT_EQUIP	EQU	11h	; EQUIPMENT_DETERMINATION (p. A-67)
INT_MEMORY	EQU	12h	; MEMORY_SIZE_DETERMINE (p. A-67)
INT_DISKETTE	EQU	13h	; DISKETTE_IO (p. A-32)
INT_COM		EQU	14h	; RS232_IO (p. A-20)
INT_CASSETTE	EQU	15h	; CASSETTE_IO (p. A-68)
INT_KBD		EQU	16h	; KEYBOARD_IO (p. A-23)
INT_LPT		EQU	17h	; PRINTER_IO (p. A-42)
INT_BASIC	EQU	18h	;
INT_REBOOT	EQU	19h	; BOOT_STRAP (p. A-20)
INT_TIME	EQU	1Ah	; TIME_OF_DAY (p. A-77)
INT_BREAK	EQU	1Bh	; CTRL_BREAK
INT_TICK	EQU	1Ch	; TIMER TICK
INT_VIDPARMS	EQU	1Dh	; VIDEO INITIALIZATION PARAMETERS
INT_DSKPARMS	EQU	1Eh	; DISKETTE INITIALIZATION PARAMETERS
INT_EXT		EQU	1Fh	; VIDEO GRAPHICS CHARACTER DATA

BOOTSTACK	SEGMENT AT 30h
BOOTSTACK	ENDS

;
; ROM BIOS DATA AREA
;
; We assume that all 256 bytes from 40:00h to 40:FFh are used or reserved.
;
; Unfortunately, there's also a byte at 50:00h (STATUS_BYTE) used by the ROM
; PRINT_SCREEN function.
;
RBDA		SEGMENT AT 40h
RS232_BASE	DW	4 DUP(?); 40:00h: ADDRESSES OF RS232 ADAPTERS
PRINTER_BASE	DW	4 DUP(?); 40:08h: ADDRESSES OF PRINTERS
EQUIP_FLAG	DW	?	; 40:10h: INSTALLED HARDWARE

EQ_NUM_PRINT	EQU	0C000h	; NUMBER OF PRINTERS ATTACHED
EQ_GAME_CTRL	EQU	1000h	; GAME I/O ATTACHED
EQ_NUM_RS232	EQU	0E00h	; NUMBER OF RS232 CARDS ATTACHED
EQ_NUM_DRIVES	EQU	00C0h	; NUMBER OF DISKETTE DRIVES (00=1, 01=2, 10=3,
				;	11=4) ONLY IF IPL_DRIVE SET
EQ_VIDEO_MODE	EQU	0030h	; INITIAL VIDEO MODE (00=UNUSED, 01=40X25 COLOR,
				;	10=80X25 COLOR, 11=80X25 MONO)
EQ_RAM_SIZE	EQU	00C0h	; PLANAR RAM SIZE (00=16K,01=32K,10=48K,11=64K)
EQ_IPL_DRIVE	EQU	0001h	; IPL (Initial Program Load) FROM DISKETTE (ie,
				;	diskette drives exist)

MFG_TEST	DB	?	; 40:12h: INITIALIZATION FLAG
MEMORY_SIZE	DW	?	; 40:13h: MEMORY SIZE IN K BYTES
IO_RAM_SIZE	DW	?	; 40:15h: MEMORY IN I/O CHANNEL
KB_FLAG		DB	?	; 40:17h: FIRST BYTE OF KEYBOARD STATUS
RBDA		ENDS

;
; Diskette Parameter Table (15 bytes pointed by INT_DSKPARMS (1Eh))
;
; Early utilities (like SPEEDUP; see https://www.pcjs.org/blog/2017/07/21/)
; changed:
;
;	DPT_SPECIFY1:	from CFh to DFh
;	DPT_HEADSETTLE:	from 19h to 00h
;
DPT		STRUC
DPT_SPECIFY1	DB	?	; CFh: SRT=C, HD UNLOAD=0F (1ST SPECIFY BYTE)
DPT_SPECIFY2	DB	?	; 02h: HD LOAD=1, MODE=DMA (2ND SPECIFY BYTE)
DPT_MOTOROFF	DB	?	; 25h: WAIT AFTER OPN TIL MOTOR OFF
DPT_BPS		DB	?	; 02h: 512 BYTES/SECTOR
DPT_SPT		DB	?	; 08h: EOT (LAST SECTOR ON TRACK)
DPT_GAP		DB	?	; 2Ah: GAP LENGTH
DPT_DTL		DB	?	; FFh: DTL
DPT_GAP3	DB	?	; 50h: GAP LENGTH FOR FORMAT
DPT_FILL	DB	?	; F6h: FILL BYTE FOR FORMAT
DPT_HEADSETTLE	DB	?	; 19h: HEAD SETTLE TIME (MS)
DPT_MOTORON	DB	?	; 04h: MOTOR-ON START TIME (1/8 SECS)
DPT		ENDS
